<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of aspsr_v1_17_14_29</title>
  <meta name="keywords" content="aspsr_v1_17_14_29">
  <meta name="description" content="Lattice definition file - generated by dimad2at v1.200000">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../../index.html">Home</a> &gt;  <a href="../../../index.html">atmat</a> &gt; <a href="../../index.html">pubtools</a> &gt; <a href="../index.html">fmagui</a> &gt; <a href="index.html">test</a> &gt; aspsr_v1_17_14_29.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../../index.html"><img alt="<" border="0" src="../../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for atmat/pubtools/fmagui/test&nbsp;<img alt=">" border="0" src="../../../../right.png"></a></td></tr></table>-->

<h1>aspsr_v1_17_14_29
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>Lattice definition file - generated by dimad2at v1.200000</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>function aspsr_v1(varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> Lattice definition file - generated by dimad2at v1.200000</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
</ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function aspsr_v1(varargin)</a>
0002 <span class="comment">% Lattice definition file - generated by dimad2at v1.200000</span>
0003 
0004 <span class="keyword">global</span> FAMLIST THERING GLOBVAL
0005 
0006 GLOBVAL.E0 = 3e9;
0007 GLOBVAL.LatticeFile = <span class="string">'aspsr'</span>;
0008 FAMLIST = cell(0);
0009 
0010 disp(<span class="string">' '</span>);
0011 disp(<span class="string">'*** Loading lattice from aspsr.m ***'</span>);
0012 
0013 <span class="comment">% Problem with getting exactly 216m. This is to correct it</span>
0014 curr_circ = 2.160004055999987e+002;
0015 d1_corr = (curr_circ - 216)/28;
0016 
0017 d1    =    drift(<span class="string">'d1'</span>    ,2.698300e+000 - d1_corr,<span class="string">'DriftPass'</span>);
0018 d2    =    drift(<span class="string">'d2'</span>    ,1.900000e-001,<span class="string">'DriftPass'</span>);
0019 d3    =    drift(<span class="string">'d3'</span>    ,1.650000e-001,<span class="string">'DriftPass'</span>);
0020 d4    =    drift(<span class="string">'d4'</span>    ,2.750000e-001,<span class="string">'DriftPass'</span>);
0021 d5    =    drift(<span class="string">'d5'</span>    ,1.550000e-001,<span class="string">'DriftPass'</span>);
0022 d6    =    drift(<span class="string">'d6'</span>    ,4.500000e-001,<span class="string">'DriftPass'</span>);
0023 dipi    =    sbend(<span class="string">'dipi'</span>    ,2.876667e-001,0.0373999,0.1122,0,-0.334999,<span class="string">'BndMPoleSymplectic4Pass'</span>);
0024 dipm    =    sbend(<span class="string">'dipm'</span>    ,2.876667e-001,0.0373999,0,0,-0.334999,<span class="string">'BndMPoleSymplectic4Pass'</span>);
0025 dipo    =    sbend(<span class="string">'dipo'</span>    ,2.876667e-001,0.0373999,0,0.1122,-0.334999,<span class="string">'BndMPoleSymplectic4Pass'</span>);
0026 dips3    =    sbend(<span class="string">'dips3'</span>    ,7.939600e-001,0.103224,0.1122,0,-0.334999,<span class="string">'BndMPoleSymplectic4Pass'</span>);
0027 dips4    =    sbend(<span class="string">'dips4'</span>    ,9.320400e-001,0.121176,0,0.1122,-0.334999,<span class="string">'BndMPoleSymplectic4Pass'</span>);
0028 dips1    =    sbend(<span class="string">'dips1'</span>    ,9.389440e-001,0.122073,0.1122,0,-0.334999,<span class="string">'BndMPoleSymplectic4Pass'</span>);
0029 dips2    =    sbend(<span class="string">'dips2'</span>    ,7.870560e-001,0.102326,0,0.1122,-0.334999,<span class="string">'BndMPoleSymplectic4Pass'</span>);
0030 q14    =    quadrupole(<span class="string">'q14'</span>    ,8.875000e-002,1.76174,<span class="string">'QuadLinearPass'</span>);
0031 q24    =    quadrupole(<span class="string">'q24'</span>    ,4.500000e-002,-1.03837,<span class="string">'QuadLinearPass'</span>);
0032 q34    =    quadrupole(<span class="string">'q34'</span>    ,8.875000e-002,1.5338,<span class="string">'QuadLinearPass'</span>);
0033 s1    =    sextupole(<span class="string">'s1'</span>    ,1.000000e-001,10,<span class="string">'StrMPoleSymplectic4Pass'</span>);
0034 s2    =    sextupole(<span class="string">'s2'</span>    ,1.000000e-001,-10,<span class="string">'StrMPoleSymplectic4Pass'</span>);
0035 s3    =    sextupole(<span class="string">'s3'</span>    ,1.000000e-001,-7.01464,<span class="string">'StrMPoleSymplectic4Pass'</span>);
0036 s4    =    sextupole(<span class="string">'s4'</span>    ,1.000000e-001,7.18936,<span class="string">'StrMPoleSymplectic4Pass'</span>);
0037 hcor    =    corrector(<span class="string">'hcor'</span>    ,0.000000e+000,[0 0.0],<span class="string">'ThinCorrectorPass'</span>);
0038 vcor    =    corrector(<span class="string">'vcor'</span>    ,0.000000e+000,[0.0 0],<span class="string">'ThinCorrectorPass'</span>);
0039 hcor11    =    corrector(<span class="string">'hcor11'</span>    ,0.000000e+000,[0 0.0],<span class="string">'ThinCorrectorPass'</span>);
0040 hcor21    =    corrector(<span class="string">'hcor21'</span>    ,0.000000e+000,[0 0.0],<span class="string">'ThinCorrectorPass'</span>);
0041 hcor31    =    corrector(<span class="string">'hcor31'</span>    ,0.000000e+000,[0 0.0],<span class="string">'ThinCorrectorPass'</span>);
0042 hcor12    =    corrector(<span class="string">'hcor12'</span>    ,0.000000e+000,[0 0.0],<span class="string">'ThinCorrectorPass'</span>);
0043 hcor22    =    corrector(<span class="string">'hcor22'</span>    ,0.000000e+000,[0 0.0],<span class="string">'ThinCorrectorPass'</span>);
0044 hcor32    =    corrector(<span class="string">'hcor32'</span>    ,0.000000e+000,[0 0.0],<span class="string">'ThinCorrectorPass'</span>);
0045 hcor13    =    corrector(<span class="string">'hcor13'</span>    ,0.000000e+000,[0 0.0],<span class="string">'ThinCorrectorPass'</span>);
0046 hcor23    =    corrector(<span class="string">'hcor23'</span>    ,0.000000e+000,[0 0.0],<span class="string">'ThinCorrectorPass'</span>);
0047 hcor33    =    corrector(<span class="string">'hcor33'</span>    ,0.000000e+000,[0 0.0],<span class="string">'ThinCorrectorPass'</span>);
0048 vcor11    =    corrector(<span class="string">'vcor11'</span>    ,0.000000e+000,[0.0 0],<span class="string">'ThinCorrectorPass'</span>);
0049 vcor21    =    corrector(<span class="string">'vcor21'</span>    ,0.000000e+000,[0.0 0],<span class="string">'ThinCorrectorPass'</span>);
0050 vcor31    =    corrector(<span class="string">'vcor31'</span>    ,0.000000e+000,[0.0 0],<span class="string">'ThinCorrectorPass'</span>);
0051 vcor41    =    corrector(<span class="string">'vcor41'</span>    ,0.000000e+000,[0.0 0],<span class="string">'ThinCorrectorPass'</span>);
0052 vcor12    =    corrector(<span class="string">'vcor12'</span>    ,0.000000e+000,[0.0 0],<span class="string">'ThinCorrectorPass'</span>);
0053 vcor22    =    corrector(<span class="string">'vcor22'</span>    ,0.000000e+000,[0.0 0],<span class="string">'ThinCorrectorPass'</span>);
0054 vcor32    =    corrector(<span class="string">'vcor32'</span>    ,0.000000e+000,[0.0 0],<span class="string">'ThinCorrectorPass'</span>);
0055 vcor42    =    corrector(<span class="string">'vcor42'</span>    ,0.000000e+000,[0.0 0],<span class="string">'ThinCorrectorPass'</span>);
0056 vcor13    =    corrector(<span class="string">'vcor13'</span>    ,0.000000e+000,[0.0 0],<span class="string">'ThinCorrectorPass'</span>);
0057 vcor23    =    corrector(<span class="string">'vcor23'</span>    ,0.000000e+000,[0.0 0],<span class="string">'ThinCorrectorPass'</span>);
0058 vcor33    =    corrector(<span class="string">'vcor33'</span>    ,0.000000e+000,[0.0 0],<span class="string">'ThinCorrectorPass'</span>);
0059 vcor43    =    corrector(<span class="string">'vcor43'</span>    ,0.000000e+000,[0.0 0],<span class="string">'ThinCorrectorPass'</span>);
0060 rf    =    rfcavity(<span class="string">'rf'</span>    ,0,3.2e6,4.996540e+008,360,<span class="string">'ThinCavityPass'</span>);
0061 d11    =    drift(<span class="string">'d11'</span>    ,2.698300e+000 - d1_corr - 0,<span class="string">'DriftPass'</span>); <span class="comment">% Drift put around the RF</span>
0062 kick1    =    corrector(<span class="string">'kick1'</span>    ,0.000000e+000,[0 0.0],<span class="string">'ThinCorrectorPass'</span>);
0063 kick2    =    corrector(<span class="string">'kick2'</span>    ,0.000000e+000,[0 0.0],<span class="string">'ThinCorrectorPass'</span>);
0064 kick3    =    corrector(<span class="string">'kick3'</span>    ,0.000000e+000,[0 0.0],<span class="string">'ThinCorrectorPass'</span>);
0065 kick4    =    corrector(<span class="string">'kick4'</span>    ,0.000000e+000,[0 0.0],<span class="string">'ThinCorrectorPass'</span>);
0066 dk11    =    drift(<span class="string">'dk11'</span>    ,2.048300e+000 - d1_corr,<span class="string">'DriftPass'</span>);
0067 dk12    =    drift(<span class="string">'dk12'</span>    ,6.500000e-001,<span class="string">'DriftPass'</span>);
0068 
0069 
0070 <span class="comment">% Different optics can be selected here taken from DIMAD least fit routine.</span>
0071 <span class="comment">% NOTE: the chromaticities for these values in dimad do not coincide</span>
0072 <span class="comment">% exactly with what AT calculates. For consistency all these values will be</span>
0073 <span class="comment">% taken from DIMAD</span>
0074 <span class="comment">% 1 := tune [13.3 5.2] disp 0.24 chrom 0</span>
0075 <span class="comment">% 2 := tune [13.3 5.2] disp 0.10 chrom 0</span>
0076 <span class="comment">% 3 := tune [13.3 5.2] disp 0.00 chrom 0</span>
0077 <span class="comment">% 4 := tune [13.3 5.2] disp 0.00 chrom 1</span>
0078 <span class="comment">% 5 := tune [13.3 5.2] disp 0.10 chrom 1</span>
0079 <span class="comment">% 6 := tune [13.3 5.2] disp 0.24 chrom 1</span>
0080 <span class="comment">% 7 := tune [13.7 5.8] disp 0.00 chrom 0</span>
0081 
0082 <span class="keyword">if</span> nargin &gt;= 2
0083     optics = varargin{2};
0084 <span class="keyword">else</span>
0085     optics = 3; <span class="comment">% default</span>
0086 <span class="keyword">end</span>
0087 
0088 <span class="keyword">switch</span>  optics
0089     <span class="keyword">case</span> 1
0090         disp(<span class="string">'tune [13.3 5.2] disp 0.24 chrom 0'</span>);
0091         q14_k = .17882880586760E+01;
0092         q24_k = -.10400954730253E+01;
0093         q34_k = .15198069179328E+01;
0094         s1_m = 10.000000;
0095         s2_m = -10.000000;
0096         s3_m = -.97230089993554E+01;
0097         s4_m = .93179016069090E+01;
0098     <span class="keyword">case</span> 2
0099         disp(<span class="string">'tune [13.3 5.2] disp 0.10 chrom 0'</span>);
0100         q14_k = .17720058771843E+01;
0101         q24_k = -.10389769468824E+01;
0102         q34_k = .15282801819176E+01;
0103         s1_m = 10.000000;
0104         s2_m = -10.000000;
0105         s3_m = -.75994591839996E+01;
0106         s4_m = .76103884899674E+01;
0107     <span class="keyword">case</span> 3
0108         disp(<span class="string">'tune [13.3 5.2] disp 0.00 chrom 0'</span>);
0109         q14_k = .17617406397041E+01;
0110         q24_k = -.10383748878187E+01;
0111         q34_k = .15338011782673E+01;
0112         s1_m = 14.000000;
0113         s2_m = -14.000000;
0114         s3_m = -.70146375990455E+01;
0115         s4_m = .71893566203318E+01;
0116     <span class="keyword">case</span> 4  
0117         disp(<span class="string">'tune [13.3 5.2] disp 0.00 chrom 1'</span>);
0118         q14_k = .17617406397041E+01;
0119         q24_k = -.10383748878187E+01;
0120         q34_k = .15338011782673E+01;
0121         s1_m = 10.000000;
0122         s2_m = -10.000000;
0123         s3_m = -.72625907536712E+01;
0124         s4_m = .74301593045396E+01;
0125     <span class="keyword">case</span> 5
0126         disp(<span class="string">'tune [13.3 5.2] disp 0.10 chrom 1'</span>);
0127         q14_k = .17720058771843E+01;
0128         q24_k = -.10389769468824E+01;
0129         q34_k = .15282801819176E+01;
0130         s1_m = 10.000000;
0131         s2_m = -10.000000;
0132         s3_m = -.79166076050914E+01;
0133         s4_m = .79238133466255E+01;
0134     <span class="keyword">case</span> 6
0135         disp(<span class="string">'tune [13.3 5.2] disp 0.24 chrom 1'</span>);
0136         q14_k = .17882880586760E+01;
0137         q24_k = -.10400954730253E+01;
0138         q34_k = .15198069179328E+01;
0139         s1_m = 10.000000;
0140         s2_m = -10.000000;
0141         s3_m = -.10260983643758E+02;
0142         s4_m = .98649616334321E+01;
0143     <span class="keyword">case</span> 7
0144         disp(<span class="string">'tune [13.7 5.8] disp 0.00 chrom 0'</span>);
0145         q14_k = 1.80390211273090;
0146         q24_k = -1.14492384587750;
0147         q34_k = 1.55608186640390;
0148         s1_m = 10.000000;
0149         s2_m = -10.000000;
0150         s3_m = -.70146375990455E+01;
0151         s4_m = .71893566203318E+01;
0152     <span class="keyword">case</span> 8
0153         disp(<span class="string">'tune [13.27 5.22] disp 0.00 chrom 0, s1s2 = +-14'</span>);
0154         q14_k = 1.7578525197264;
0155         q24_k = -1.038011510073;
0156         q34_k = 1.5337246103688;
0157         s1_m = 14.000000;
0158         s2_m = -14.000000;
0159         s3_m = -7.032579989605;
0160         s4_m = 7.2218549278029;
0161 <span class="keyword">end</span>
0162 
0163 <span class="comment">% For the quadrupoles</span>
0164 FAMLIST{q14}.ElemData.K = q14_k;
0165 FAMLIST{q24}.ElemData.K = q24_k;
0166 FAMLIST{q34}.ElemData.K = q34_k;
0167 FAMLIST{q14}.ElemData.PolynomB(2) = q14_k;
0168 FAMLIST{q24}.ElemData.PolynomB(2) = q24_k;
0169 FAMLIST{q34}.ElemData.PolynomB(2) = q34_k;
0170 <span class="comment">% Sextupoles</span>
0171 FAMLIST{s1}.ElemData.PolynomB(3) = s1_m;
0172 FAMLIST{s2}.ElemData.PolynomB(3) = s2_m;
0173 FAMLIST{s3}.ElemData.PolynomB(3) = s3_m;
0174 FAMLIST{s4}.ElemData.PolynomB(3) = s4_m;
0175 
0176 <span class="comment">% Begin declaration of element groups and lattice.</span>
0177 dip = [ dipi dipm dipm dipm dipm dipo ];
0178 dip1 = [ dips1 dips2 ];
0179 dip2 = [ dips3 dips4 ];
0180 q1 = [ q14 q14 q14 q14 ];
0181 q2 = [ q24 q24 q24 q24 ];
0182 q3 = [ q34 q34 q34 q34 ];
0183 cel = [ d1 s1 hcor s1 d2 q1 d3 s2 vcor s2 d4 dip d4 s3 vcor s3 d5 q2 d6 q3 d2 s4 hcor s4 d2 q3 d6 q2 d5 s3 vcor s3 d4 dip d4 s2 vcor s2 d3 q1 d2 s1 hcor s1 d1 ];
0184 cel1 = [ d1 s1 hcor11 s1 d2 q1 d3 s2 vcor11 s2 d4 dip1 d4 s3 vcor21 s3 d5 q2 d6 q3 d2 s4 hcor21 s4 d2 q3 d6 q2 d5 s3 vcor31 s3 d4 dip2 d4 s2 vcor41 s2 d3 q1 d2 s1 hcor31 s1 d1 ];
0185 cel2 = [ d1 s1 hcor12 s1 d2 q1 d3 s2 vcor12 s2 d4 dip1 d4 s3 vcor22 s3 d5 q2 d6 q3 d2 s4 hcor22 s4 d2 q3 d6 q2 d5 s3 vcor32 s3 d4 dip2 d4 s2 vcor42 s2 d3 q1 d2 s1 hcor32 s1 d1 ];
0186 cel3 = [ d1 s1 hcor13 s1 d2 q1 d3 s2 vcor13 s2 d4 dip d4 s3 vcor23 s3 d5 q2 d6 q3 d2 s4 hcor23 s4 d2 q3 d6 q2 d5 s3 vcor33 s3 d4 dip d4 s2 vcor43 s2 d3 q1 d2 s1 hcor33 s1 d1 ];
0187 celrf06 = [ d1 s1 hcor s1 d2 q1 d3 s2 vcor s2 d4 dip d4 s3 vcor s3 d5 q2 d6 q3 d2 s4 hcor s4 d2 q3 d6 q2 d5 s3 vcor s3 d4 dip d4 s2 vcor s2 d3 q1 d2 s1 hcor s1 d11 ];
0188 celrf07 = [ d11 s1 hcor s1 d2 q1 d3 s2 vcor s2 d4 dip d4 s3 vcor s3 d5 q2 d6 q3 d2 s4 hcor s4 d2 q3 d6 q2 d5 s3 vcor s3 d4 dip d4 s2 vcor s2 d3 q1 d2 s1 hcor s1 d1 ];
0189 celkick14 = [ dk11 kick1 dk12 s1 hcor s1 d2 q1 d3 s2 vcor s2 d4 dip d4 s3 vcor s3 d5 q2 d6 q3 d2 s4 hcor s4 d2 q3 d6 q2 d5 s3 vcor s3 d4 dip d4 s2 vcor s2 d3 q1 d2 s1 hcor s1 dk12 kick2 dk11 ];
0190 celkick01 = [ dk11 kick3 dk12 s1 hcor s1 d2 q1 d3 s2 vcor s2 d4 dip d4 s3 vcor s3 d5 q2 d6 q3 d2 s4 hcor s4 d2 q3 d6 q2 d5 s3 vcor s3 d4 dip d4 s2 vcor s2 d3 q1 d2 s1 hcor s1 dk12 kick4 dk11 ];
0191 bumpsect = [ cel1 cel2 ];
0192 bumpring = [ cel cel cel cel cel cel cel1 cel2 cel3 cel cel cel cel cel ];
0193 krrf = [ cel rf cel cel cel cel cel cel1 cel2 cel3 cel cel cel cel cel ];
0194 rfring = [ cel rf cel cel cel cel cel cel cel cel cel cel cel cel cel ];
0195 ring = [ cel cel cel cel cel cel cel cel cel cel cel cel cel cel ];
0196 fullring = [ celkick14 celkick01 cel cel cel cel cel rf cel cel cel cel cel cel cel ];
0197 rfcel = [ cel rf ];
0198 
0199 <span class="keyword">if</span> nargin &gt;= 1
0200     fprintf(<span class="string">'Using lattice : %s\n'</span>, varargin{1});
0201     eval([<span class="string">'buildlat('</span> varargin{1} <span class="string">');'</span>]);
0202 <span class="keyword">else</span>
0203     <span class="comment">% Default lattice to load</span>
0204     fprintf(<span class="string">'Using default lattice : fullring\n'</span>);
0205     buildlat(fullring);
0206 <span class="keyword">end</span>
0207 
0208 evalin(<span class="string">'caller'</span>,<span class="string">'global THERING FAMLIST GLOBVAL'</span>);
0209 disp(<span class="string">'** Done **'</span>);</pre></div>
<hr><address>Generated on Sun 28-Jul-2013 23:18:56 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>