<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of setfielderr</title>
  <meta name="keywords" content="setfielderr">
  <meta name="description" content="SETFIELDERR will add/generate a field error structure for THERING that">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../index.html">Home</a> &gt;  <a href="../../index.html">atmat</a> &gt; <a href="../index.html">pubtools</a> &gt; <a href="index.html">misalignment</a> &gt; setfielderr.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../index.html"><img alt="<" border="0" src="../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for atmat/pubtools/misalignment&nbsp;<img alt=">" border="0" src="../../../right.png"></a></td></tr></table>-->

<h1>setfielderr
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>SETFIELDERR will add/generate a field error structure for THERING that</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>function varargout = setfielderr(varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> SETFIELDERR will add/generate a field error structure for THERING that
 will later be used by CALCFIELDERR to generate the actual field error
 and apply it to THERING. 

 SETFIELDERR(FAMNAME, SIGMA_A, SIGMA_B, CUTOFF) where FAMNAME is the name
 of the family of elements, SIGMA_A/SIGMA_B is a scalar or vector
 specifying 1 sigma spread of the field or multipole fields, polynomA and
 polynomB respectively. CUTOFF an integer specifying how many sigmas
 before excluding the calculated misalignment. If cutoff is 0, then all
 random numbers will be accepted.</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="setfielderr.html" class="code" title="function varargout = setfielderr(varargin)">setfielderr</a>	SETFIELDERR will add/generate a field error structure for THERING that</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="setfielderr.html" class="code" title="function varargout = setfielderr(varargin)">setfielderr</a>	SETFIELDERR will add/generate a field error structure for THERING that</li><li><a href="testfielderrors.html" class="code" title="">testfielderrors</a>	</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function varargout = setfielderr(varargin)</a>
0002 <span class="comment">% SETFIELDERR will add/generate a field error structure for THERING that</span>
0003 <span class="comment">% will later be used by CALCFIELDERR to generate the actual field error</span>
0004 <span class="comment">% and apply it to THERING.</span>
0005 <span class="comment">%</span>
0006 <span class="comment">% SETFIELDERR(FAMNAME, SIGMA_A, SIGMA_B, CUTOFF) where FAMNAME is the name</span>
0007 <span class="comment">% of the family of elements, SIGMA_A/SIGMA_B is a scalar or vector</span>
0008 <span class="comment">% specifying 1 sigma spread of the field or multipole fields, polynomA and</span>
0009 <span class="comment">% polynomB respectively. CUTOFF an integer specifying how many sigmas</span>
0010 <span class="comment">% before excluding the calculated misalignment. If cutoff is 0, then all</span>
0011 <span class="comment">% random numbers will be accepted.</span>
0012 
0013 <span class="keyword">global</span> THERING
0014 
0015 <span class="keyword">if</span> ~exist(<span class="string">'THERING'</span>,<span class="string">'var'</span>)
0016     disp(<span class="string">'Please load the model first'</span>);
0017     <span class="keyword">return</span>
0018 <span class="keyword">end</span>
0019 
0020 ferr = getappdata(0,<span class="string">'FielderrData'</span>);
0021 
0022 <span class="keyword">if</span> isempty(ferr)
0023     disp(<span class="string">'Generating the first field error datastructure now'</span>);
0024     ferr.date = datestr(now,31);
0025     ferr.CreatedBy = <span class="string">'setfielderr'</span>;
0026     ferr.nind = 0;
0027     ferr.ngird = 0;
0028 <span class="keyword">end</span>
0029 
0030 <span class="comment">% Parse input data</span>
0031 n = 4;
0032 <span class="keyword">if</span> nargin &gt;= n &amp; isnumeric(varargin{n})
0033     cutoff = varargin{n};
0034 <span class="keyword">else</span>
0035     disp(<span class="string">'Defaulting cutoff to 3.'</span>);
0036     cutoff = 3;
0037 <span class="keyword">end</span>
0038 
0039 n = n - 1;
0040 <span class="keyword">if</span> nargin &gt;= n &amp; isnumeric(varargin{n})
0041     sigmaB = varargin{n};
0042 <span class="keyword">else</span>
0043     error(<span class="string">'One sigma spread of the field error not specified properly! (SIGMA_B)'</span>);
0044 <span class="keyword">end</span>
0045 
0046 n = n - 1;
0047 <span class="keyword">if</span> nargin &gt;= n &amp; isnumeric(varargin{n})
0048     sigmaA = varargin{n};
0049 <span class="keyword">else</span>
0050     error(<span class="string">'One sigma spread of the field error not specified properly! (SIGMA_A)'</span>);
0051 <span class="keyword">end</span>
0052 
0053 n = n - 1;
0054 <span class="keyword">if</span> nargin &gt;= n
0055     <span class="keyword">if</span> ischar(varargin{n})
0056         indices = findcells(THERING, <span class="string">'FamName'</span>,varargin{n});
0057         famname = varargin{n};
0058     <span class="keyword">elseif</span> isnumeric(varargin{n})
0059         <span class="comment">% Assumes that if indices are supplied that they are part of the</span>
0060         <span class="comment">% same family of elements.</span>
0061         indices = varargin{n};
0062         famname = THERING{indices(1)}.FamName;
0063     <span class="keyword">elseif</span> iscell(varargin{n})
0064         <span class="keyword">for</span> i=1:length(varargin{n})
0065             <a href="setfielderr.html" class="code" title="function varargout = setfielderr(varargin)">setfielderr</a>(varargin{n}{i},sigma,cutoff);
0066         <span class="keyword">end</span>
0067         <span class="keyword">return</span>
0068     <span class="keyword">else</span>
0069         error(<span class="string">'Family name or index into THERING not in correct format!'</span>);
0070     <span class="keyword">end</span>
0071 <span class="keyword">else</span>
0072     error(<span class="string">'Family name or index into THERING not given!'</span>);
0073 <span class="keyword">end</span>
0074 
0075 ferr.nind = ferr.nind + 1;
0076 
0077 ferr.ind(ferr.nind).name = famname;
0078 ferr.ind(ferr.nind).ATindex = indices;
0079 ferr.ind(ferr.nind).sigmaA = sigmaA;
0080 ferr.ind(ferr.nind).sigmaB = sigmaB;
0081 ferr.ind(ferr.nind).cutoff = cutoff;
0082 
0083 setappdata(0,<span class="string">'FielderrData'</span>,ferr);</pre></div>
<hr><address>Generated on Sun 28-Jul-2013 23:18:56 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>